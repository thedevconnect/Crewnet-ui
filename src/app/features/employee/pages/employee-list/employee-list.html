<div class="p-6 space-y-4">
  <div class="flex justify-between items-center">
    <h2 class="text-xl font-semibold">Employees</h2>
    <button pButton label="Add Employee" icon="pi pi-plus" class="p-button-success" (click)="onAdd()"></button>
  </div>

  <div class="flex items-center gap-3">
    <input pInputText type="text" placeholder="Search..." class="w-64" (input)="search.set($any($event.target).value)"/>
  </div>

  <p-table [value]="filtered()" [paginator]="true" [rows]="10" [loading]="loading()" responsiveLayout="scroll">
    <ng-template pTemplate="header">
      <tr>
        <th pSortableColumn="name">Name <p-sortIcon field="name"></p-sortIcon></th>
        <th pSortableColumn="email">Email <p-sortIcon field="email"></p-sortIcon></th>
        <th>Phone</th>
        <th>Department</th>
        <th>Status</th>
        <th>Joining</th>
        <th class="text-right">Actions</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-e>
      <tr>
        <td>{{ e.name }}</td>
        <td>{{ e.email }}</td>
        <td>{{ e.phone }}</td>
        <td>{{ e.department }}</td>
        <td><span class="px-2 py-1 rounded text-white" [class]="e.status === 'Active' ? 'bg-green-600' : 'bg-gray-500'">{{ e.status }}</span></td>
        <td>{{ e.joiningDate }}</td>
        <td class="text-right space-x-2">
          <button pButton type="button" icon="pi pi-eye" class="p-button-rounded p-button-text" (click)="onView(e)" pTooltip="View" tooltipPosition="top"></button>
          <button pButton type="button" icon="pi pi-pencil" class="p-button-rounded p-button-text" (click)="onEdit(e)" pTooltip="Edit" tooltipPosition="top"></button>
          <button pButton type="button" icon="pi pi-trash" class="p-button-rounded p-button-text p-button-danger" (click)="onDelete(e)" pTooltip="Delete" tooltipPosition="top"></button>
        </td>
      </tr>
    </ng-template>
  </p-table>

  <p-dialog header="Employee Details" [visible]="viewDialog()" [modal]="true" [style]="{width: '32rem'}" (onHide)="viewDialog.set(false)">
    @if (selectedEmployee(); as s) {
    <div class="space-y-2">
      <div><span class="font-medium">Name:</span> {{ s.name }}</div>
      <div><span class="font-medium">Email:</span> {{ s.email }}</div>
      <div><span class="font-medium">Phone:</span> {{ s.phone }}</div>
      <div><span class="font-medium">Department:</span> {{ s.department }}</div>
      <div><span class="font-medium">Status:</span> {{ s.status }}</div>
      <div><span class="font-medium">Joining:</span> {{ s.joiningDate }}</div>
    </div>
    }
    <ng-template pTemplate="footer">
      <button pButton type="button" label="Close" (click)="viewDialog.set(false)"></button>
    </ng-template>
  </p-dialog>

  <p-confirmDialog></p-confirmDialog>
  <p-toast></p-toast>
</div>
