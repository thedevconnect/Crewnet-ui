<div class="bg-white min-h-screen p-4 sm:p-6">

    <!-- PAGE HEADER -->
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
        <h1 class="text-2xl font-bold text-gray-800">Employee Management</h1>
        <p-button label="Add Employee" icon="pi pi-plus" (click)="showDialog()" [raised]="true">
        </p-button>
    </div>

    <p-toast></p-toast>

    <!-- DRAWER -->
    <p-drawer [(visible)]="visible" position="right" [modal]="true" [dismissible]="false"
        [style]="{ width: '820px', maxWidth: '100vw' }" styleClass="employee-drawer">

        <!-- DRAWER HEADER -->
        <ng-template pTemplate="header">
            <div class="flex items-center justify-between px-4 py-3 border-b">
                <div class="flex items-center gap-2">
                    <i class="pi pi-user-plus text-primary"></i>
                    <span class="text-lg font-semibold">{{ header() }}</span>
                </div>
            </div>
        </ng-template>

        <!-- DRAWER BODY -->
        <form [formGroup]="employeeForm" class="flex flex-col gap-6 p-4">

            <!-- EMPLOYEE IDENTITY -->
            <p-panel header="Employee Identity" [toggleable]="true">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">

                    <div class="field-group">
                        <label>Employee Code *</label>
                        <input pInputText formControlName="employeeCode" readonly />
                    </div>

                    <div class="field-group">
                        <label>Status *</label>
                        <p-select formControlName="status" [options]="statusOptions" optionLabel="label"
                            optionValue="value" placeholder="Select Status" styleClass="w-full">
                        </p-select>
                    </div>

                </div>
            </p-panel>

            <!-- PERSONAL DETAILS -->
            <p-panel header="Personal Details" [toggleable]="true">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">

                    <div class="field-group">
                        <label>First Name *</label>
                        <input pInputText formControlName="firstName" />
                    </div>

                    <div class="field-group">
                        <label>Last Name *</label>
                        <input pInputText formControlName="lastName" />
                    </div>

                    <div class="field-group">
                        <label>Gender *</label>
                        <p-select formControlName="gender" [options]="genderOptions" optionLabel="label"
                            optionValue="value" placeholder="Select Gender" styleClass="w-full">
                        </p-select>
                    </div>

                    <div class="field-group">
                        <label>Date of Birth *</label>
                        <p-datepicker formControlName="dateOfBirth" dateFormat="yy-mm-dd" [showIcon]="true"
                            styleClass="w-full">
                        </p-datepicker>
                    </div>

                </div>
            </p-panel>

            <!-- CONTACT DETAILS -->
            <p-panel header="Contact Details" [toggleable]="true">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">

                    <div class="field-group">
                        <label>Email *</label>
                        <input pInputText formControlName="email" />
                    </div>

                    <div class="field-group">
                        <label>Mobile Number *</label>
                        <input pInputText formControlName="mobileNumber" />
                    </div>

                </div>
            </p-panel>

            <!-- JOB DETAILS -->
            <p-panel header="Job Details" [toggleable]="true">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">

                    <div class="field-group">
                        <label>Department *</label>
                        <p-select formControlName="department" [options]="departmentOptions" optionLabel="label"
                            optionValue="value" [filter]="true" placeholder="Select Department" styleClass="w-full">
                        </p-select>
                    </div>

                    <div class="field-group">
                        <label>Designation *</label>
                        <p-select formControlName="designation" [options]="designationOptions" optionLabel="label"
                            optionValue="value" [filter]="true" placeholder="Select Designation" styleClass="w-full">
                        </p-select>
                    </div>

                    <div class="field-group">
                        <label>Employment Type *</label>
                        <p-select formControlName="employmentType" [options]="employmentTypeOptions" optionLabel="label"
                            optionValue="value" placeholder="Select Type" styleClass="w-full">
                        </p-select>
                    </div>

                    <div class="field-group">
                        <label>Joining Date *</label>
                        <p-datepicker formControlName="joiningDate" dateFormat="yy-mm-dd" [showIcon]="true"
                            styleClass="w-full">
                        </p-datepicker>
                    </div>

                </div>
            </p-panel>

            <!-- SYSTEM ACCESS -->
            <p-panel header="System Access" [toggleable]="true">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">

                    <div class="field-group">
                        <label>Role *</label>
                        <p-select formControlName="role" [options]="roleOptions" optionLabel="label" optionValue="value"
                            placeholder="Select Role" styleClass="w-full">
                        </p-select>
                    </div>

                    <div class="field-group">
                        <label>Username</label>
                        <input pInputText formControlName="username" readonly />
                    </div>

                    <div class="flex items-center gap-2 md:col-span-2">
                        <p-checkbox formControlName="firstLogin" binary inputId="firstLogin"></p-checkbox>
                        <label for="firstLogin">Force password change on first login</label>
                    </div>

                </div>
            </p-panel>

        </form>

        <!-- DRAWER FOOTER -->
        <ng-template pTemplate="footer">
            <div style="display: flex; justify-content: end; gap: 1rem; padding: 1rem; border-top: 1px solid #e0e0e0;">
                <p-button label="Reset" severity="secondary" (click)="resetAllForms()">
                </p-button>

                <p-button label="Submit" severity="primary" (click)="OnSubmitModal()" [loading]="isSubmitting()">
                </p-button>
            </div>
        </ng-template>

    </p-drawer>

</div>