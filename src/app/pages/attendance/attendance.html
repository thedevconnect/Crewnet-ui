<div class="p-4 max-w-md mx-auto">
  <p-toast></p-toast>

  <!-- Attendance Status -->
  <p-card header="Today Attendance" class="shadow-lg rounded-xl mb-6">

    @if (loadingStatus()) {
      <div class="text-center py-4">
        <i class="pi pi-spin pi-spinner text-2xl text-blue-600"></i>
        <p class="text-gray-600 mt-2">Loading status...</p>
      </div>
    } @else {
      <div class="text-center">
        <p class="text-xl font-semibold mb-2">
          Status:
          <span class="text-blue-600">
            @if (todayStatus()?.attendance) {
              {{ todayStatus()?.attendance?.swipeIn && todayStatus()?.attendance?.swipeOut ? 'Completed' : 'In Progress' }}
            } @else {
              Not Marked
            }
          </span>
        </p>

        <p class="text-gray-600 mb-1">
          Swipe In: {{ todayStatus()?.attendance?.swipeIn ? (todayStatus()?.attendance?.swipeIn | date:'short') : '-' }}
        </p>

        <p class="text-gray-600">
          Swipe Out: {{ todayStatus()?.attendance?.swipeOut ? (todayStatus()?.attendance?.swipeOut | date:'short') : '-' }}
        </p>
      </div>
    }

  </p-card>

  <!-- Swipe Buttons -->
  <div class="flex flex-col gap-4 mt-6">
    
    <!-- Swipe IN Button -->
    <button 
      (click)="doSwipeIn()"
      [disabled]="!todayStatus()?.canSwipeIn || loadingSwipeIn() || loadingStatus()"
      class="swipe-btn swipe-btn-in">
      <i class="pi pi-sign-in text-2xl mr-3"></i>
      <div class="flex flex-col items-start">
        <span class="text-lg font-semibold">Swipe IN</span>
        <span class="text-sm opacity-90">Office Entry</span>
      </div>
      @if (loadingSwipeIn()) {
        <i class="pi pi-spin pi-spinner ml-auto"></i>
      }
    </button>

    <!-- Swipe OUT Button -->
    <button 
      (click)="doSwipeOut()"
      [disabled]="!todayStatus()?.canSwipeOut || loadingSwipeOut() || loadingStatus()"
      class="swipe-btn swipe-btn-out">
      <i class="pi pi-sign-out text-2xl mr-3"></i>
      <div class="flex flex-col items-start">
        <span class="text-lg font-semibold">Swipe OUT</span>
        <span class="text-sm opacity-90">Office Exit</span>
      </div>
      @if (loadingSwipeOut()) {
        <i class="pi pi-spin pi-spinner ml-auto"></i>
      }
    </button>

  </div>

</div>