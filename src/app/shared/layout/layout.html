<div class="layout-container">
  <!-- Sidebar - Fixed on left -->
  <aside [class]="sidebarOpen() ? 'sidebar sidebar-open' : 'sidebar sidebar-closed'">

    <!-- Logo Section -->
    <div class="sidebar-logo">
      <div class="logo-header">
        @if (sidebarOpen()) {
        <div class="logo-content">
          <div class="logo-icon">
            <i class="pi pi-users"></i>
          </div>
          <div class="logo-text">
            <h1 class="logo-title">oblo</h1>
            <p class="logo-subtitle">oblo Solutions</p>
          </div>
        </div>
        } @else {
        <div class="logo-icon-collapsed">
          <i class="pi pi-users"></i>
        </div>
        }
        <button class="toggle-btn toggle-btn-top" (click)="toggleSidebar()"
          [attr.title]="sidebarOpen() ? 'Collapse Sidebar' : 'Expand Sidebar'">
          <i [class]="sidebarOpen() ? 'pi pi-chevron-left' : 'pi pi-chevron-right'"></i>
        </button>
      </div>
    </div>

    <!-- Navigation Menu -->
    <nav class="sidebar-nav">
      @for (item of menuItems; track item.route) {
      <a [routerLink]="item.route" routerLinkActive="nav-item-active" class="nav-item"
        [class.nav-item-collapsed]="!sidebarOpen()" [attr.title]="!sidebarOpen() ? item.label : null">
        <div class="nav-item-icon">
          <i [class]="'pi ' + item.icon"></i>
        </div>
        @if (sidebarOpen()) {
        <span class="nav-item-label">{{ item.label }}</span>
        }
      </a>
      }
    </nav>
  </aside>

  <!-- Main Content Wrapper - Adjusts based on sidebar width -->
  <div 
    class="main-content-wrapper"
    [class.sidebar-open]="sidebarOpen()"
    [class.sidebar-closed]="!sidebarOpen()">
    
    <!-- Header Component - Sticky within main content -->
    @if (userDetails(); as user) {
    <app-header [user]="user" (onLogout)="logout()" />
    }

    <!-- Page Content -->
    <main class="main-content">
      <router-outlet />
    </main>
  </div>

  <!-- Global Toast and Confirm Dialog -->
  <p-toast></p-toast>
  <p-confirmDialog></p-confirmDialog>
</div>
