<div class="layout-wrapper">
  <!-- Sidebar -->
  <aside class="sidebar" [class.sidebar-expanded]="sidebarOpen()" [class.sidebar-collapsed]="!sidebarOpen()">

    <!-- Logo Section with Company Name -->
    <div class="sidebar-logo">
      <a [routerLink]="getDashboardRoute()" class="logo-link">
        <img src="assets/img/OBLO.png" alt="oblo Logo" class="logo-image">
        @if (sidebarOpen()) {
        <span class="logo-text"> </span>
        }
      </a>
    </div>

    <!-- Menu -->
    <nav class="sidebar-nav">
      @for (menu of menuItemsWithSubmenu(); track menu.menu) {
      <div class="menu-item-wrapper">
        <!-- Menu Link -->
        <a [routerLink]="menu.route" routerLinkActive="menu-item-active" class="menu-button"
          [class.justify-center]="!sidebarOpen()" [class.justify-start]="sidebarOpen()">
          <i [class]="'pi ' + menu.icon"></i>
          @if (sidebarOpen()) {
          <span>{{ menu.menu }}</span>
          }
        </a>
      </div>
      }
    </nav>
  </aside>

  <!-- Main Content Area -->
  <div class="main-content-area" [class.sidebar-closed]="!sidebarOpen()">

    <!-- Header Component -->
    @if (userDetails(); as user) {
    <app-header [user]="user" [sidebarOpen]="sidebarOpen()" [selectedRoleId]="selectedRoleId()" (onLogout)="logout()"
      (onRoleChange)="onRoleChange($event)" />
    }

    <!-- Main Content -->
    <main class="content-main">
      <router-outlet />
    </main>

    <!-- Footer -->
    <footer class="content-footer">
      <div class="footer-content">
        <span>© 2025 Nobilitas Infotech Pvt. Ltd.</span>
        <span class="footer-links">
          Privacy · Terms
        </span>
      </div>
    </footer>
  </div>

  <!-- Global Toast and Confirm Dialog -->
  <p-toast></p-toast>
  <p-confirmDialog></p-confirmDialog>
</div>